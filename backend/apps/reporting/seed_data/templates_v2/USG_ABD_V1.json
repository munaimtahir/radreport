{
  "code": "USG_ABD_V1",
  "name": "USG Abdomen",
  "modality": "USG",
  "status": "active",
  "is_frozen": false,
  "json_schema": {
    "type": "object",
    "properties": {
      "liv_size_cm": {"type": "number"},
      "liv_echotexture": {"type": "string"},
      "liv_focal_lesion_present": {"type": "boolean"},
      "gb_stones_present": {"type": "boolean"},
      "gb_wall_thickness_mm": {"type": "number"},
      "spl_length_cm": {"type": "number"},
      "kid_r_hydronephrosis_grade": {"type": "string"},
      "kid_l_hydronephrosis_grade": {"type": "string"},
      "kid_r_calculus_present": {"type": "boolean"},
      "kid_l_calculus_present": {"type": "boolean"},
      "ff_present": {"type": "boolean"},
      "ff_amount": {"type": "string"}
    }
  },
  "ui_schema": {
    "ui:order": [
      "liv_size_cm",
      "liv_echotexture",
      "liv_focal_lesion_present",
      "gb_stones_present",
      "gb_wall_thickness_mm",
      "spl_length_cm",
      "kid_r_hydronephrosis_grade",
      "kid_l_hydronephrosis_grade",
      "kid_r_calculus_present",
      "kid_l_calculus_present",
      "ff_present",
      "ff_amount"
    ]
  },
  "narrative_rules": {
    "sections": [
      {
        "title": "Abdomen",
        "content": [
          "Liver measures {{liv_size_cm}} cm with {{liv_echotexture}} echotexture.",
          {"if": {"field": "liv_focal_lesion_present", "equals": true}, "then": "Focal hepatic lesion is seen."},
          {"if": {"field": "gb_stones_present", "equals": true}, "then": "Gall bladder calculus is present."},
          {"if": {"field": "kid_r_calculus_present", "equals": true}, "then": "Right renal calculus is noted."},
          {"if": {"field": "kid_l_calculus_present", "equals": true}, "then": "Left renal calculus is noted."}
        ]
      }
    ],
    "impression_rules": [
      {"priority": 10, "when": {"field": "ff_present", "equals": true}, "text": "Free fluid present ({{ff_amount}}).", "continue": true},
      {"priority": 20, "when": {"field": "gb_stones_present", "equals": true}, "text": "Cholelithiasis.", "continue": true},
      {"priority": 30, "when": {"field": "kid_r_calculus_present", "equals": true}, "text": "Right renal calculus.", "continue": true},
      {"priority": 31, "when": {"field": "kid_l_calculus_present", "equals": true}, "text": "Left renal calculus.", "continue": true}
    ]
  }
}
