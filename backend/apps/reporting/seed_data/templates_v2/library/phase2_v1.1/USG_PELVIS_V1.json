{
  "code": "USG_PELVIS_V1",
  "name": "USG Pelvis",
  "modality": "USG",
  "status": "active",
  "is_frozen": false,
  "json_schema": {
    "type": "object",
    "properties": {
      "ut_visualized": {"type": "boolean"},
      "ut_size_cm": {"type": "string"},
      "ut_fibroid_present": {"type": "boolean"},
      "endometrial_appearance": {"type": "string"},
      "ov_r_simple_cyst_present": {"type": "boolean"},
      "ov_l_simple_cyst_present": {"type": "boolean"},
      "adnx_mass_present": {"type": "boolean"},
      "adnx_side": {"type": "string"},
      "bl_pvr_ml": {"type": "number"},
      "ff_present": {"type": "boolean"},
      "ff_amount": {"type": "string"}
    }
  },
  "ui_schema": {
    "ui:order": [
      "ut_visualized",
      "ut_size_cm",
      "ut_fibroid_present",
      "endometrial_appearance",
      "ov_r_simple_cyst_present",
      "ov_l_simple_cyst_present",
      "adnx_mass_present",
      "adnx_side",
      "bl_pvr_ml",
      "ff_present",
      "ff_amount"
    ]
  },
  "narrative_rules": {
    "sections": [
      {
        "title": "Pelvis",
        "content": [
          {"if": {"field": "ut_visualized", "equals": true}, "then": "Uterus is visualized."},
          {"if": {"field": "ut_fibroid_present", "equals": true}, "then": "Fibroid is noted in the uterus."},
          {"if": {"field": "ov_r_simple_cyst_present", "equals": true}, "then": "Right ovarian simple cyst is present."},
          {"if": {"field": "ov_l_simple_cyst_present", "equals": true}, "then": "Left ovarian simple cyst is present."},
          {"if": {"field": "adnx_mass_present", "equals": true}, "then": "Adnexal mass is present."}
        ]
      }
    ],
    "impression_rules": [
      {"priority": 10, "when": {"field": "ut_fibroid_present", "equals": true}, "text": "Uterine fibroid.", "continue": true},
      {"priority": 20, "when": {"field": "adnx_mass_present", "equals": true}, "text": "Adnexal mass present.", "continue": true},
      {"priority": 30, "when": {"field": "ff_present", "equals": true}, "text": "Free fluid present.", "continue": true},
      {"priority": 40, "when": {"field": "bl_pvr_ml", "gte": 100}, "text": "Significant post-void residual urine.", "continue": true}
    ]
  }
}
